<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Class/Level-1 Chapter-1 Practice Test-1 (English Grammar)</title>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  body {
    font-family: 'Times New Roman', Times, serif;
    margin: 0;
    padding: 20px;
    font-size: 18px;
    background-color: white;
    user-select: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-drag: none;
}

body, img {
    -webkit-touch-callout: none;
}

.container {
    max-width: 800px;
    margin: auto;
}
.header {
    background-color: #87CEEB;
    padding: 20px;
    text-align: center;
    color: black;
    border-radius: 10px;
    box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
}
.header img {
    height: 250px;
    width: 350px;
    display: block;
    margin: 0 auto 10px;
}
.header h1, .header h2 {
    margin: 0;
    font-size: 24px;
}
.quiz-container, .results-container {
    background-color: #fff;
    padding: 20px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    margin-top: 20px;
    display: none;
}
.quiz-slide {
    display: none;
}
.quiz-slide.active {
    display: block;
}
label {
    display: block;
    margin-bottom: 10px;
    color: black;
}
button, .submit-button, .back-button {
    background-color: #4CAF50;
    color: white;
    border: none;
    padding: 15px 30px;
    font-size: 18px;
    cursor: pointer;
    border-radius: 5px;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}
button:hover, .submit-button:hover, .back-button:hover {
    background-color: #45a049;
    transform: scale(1.05);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
}
.back-button-custom {
    background-color: #FF5733;
}
.back-button-custom:hover {
    background-color: #E64A19;
}
.navigation-buttons {
    display: flex;
    justify-content: space-between;
    margin-top: 20px;
}
.timer-decorated {
    font-size: 20px;
    text-align: center;
    margin-bottom: 20px;
    padding: 10px;
    background-color: #000;
    color: #0f0;
}

/* Disable right-click */
body {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}
</style>

<script>
document.addEventListener('contextmenu', function(e) {
  e.preventDefault(); // Disable right-click
});
</script>
</head>
<body>
<div class="header">
  <img id="schoolImage" src="default_school_image_url.jpg" alt="School Image"/>
  <h1 id="schoolName">School Name</h1>
  <h2>Chapter-1-The Sentence (English Navigator) Practice Test-1</h2>
</div>

<div class="container">
  <div class="start-container">
    <h2>Welcome, <span id="studentName">Student</span></h2>
    <h3>Class: <span id="studentClass">Class Info</span></h3>
    <button onclick="startQuiz()">Start Test</button>
  </div>

  <div class="quiz-container">
    <div class="timer-decorated">Time Remaining: <span id="timer">15:00</span></div>

    <!-- Include all the questions as in your original code. -->
  <!-- Question 1 -->
  <div class="quiz-slide active" id="slide-1">
 
  <h2>Q1: What is a sentence?</h2>
  <form>
    <label>
      <input name="q1" type="radio" value="a) A group of letters"/> a) A group of letters
    </label><br>
    <label>
      <input name="q1" type="radio" value="b) A group of words that makes sense"/> b) A group of words that makes sense
    </label><br>
    <label>
      <input name="q1" type="radio" value="c) A group of numbers"/> c) A group of numbers
    </label><br>
    <label>
      <input name="q1" type="radio" value="d) A group of pictures"/> d) A group of pictures
    </label>
  </form>
  <div class="navigation-buttons">
    <button class="navigation-button next-button" onclick="nextSlide(2)">Next</button>
  </div>
  <p class="quote">"A good sentence helps us understand the world better." - Anonymous</p>
</div>

<!-- Question 2 -->
<div class="quiz-slide" id="slide-2">
  <h2>Q2: Which sentence is correctly written?</h2>
  <form>
    <label>
      <input name="q2" type="radio" value="a) He to school goes."/> a) He to school goes.
    </label><br>
    <label>
      <input name="q2" type="radio" value="b) He goes to school."/> b) He goes to school.
    </label><br>
    <label>
      <input name="q2" type="radio" value="c) Goes he school to."/> c) Goes he school to.
    </label><br>
    <label>
      <input name="q2" type="radio" value="d) Goes school he to."/> d) Goes school he to.
    </label>
  </form>
  <div class="navigation-buttons">
    <button class="navigation-button back-button" onclick="prevSlide(1)">Back</button>
    <button class="navigation-button next-button" onclick="nextSlide(3)">Next</button>
  </div>
  <p class="quote">"Learning to write sentences is like building strong bridges between your thoughts." - Anonymous</p>
</div>

<!-- Question 3 -->
<div class="quiz-slide" id="slide-3">
  <h2>Q3: What does a sentence start with?</h2>
  <form>
    <label>
      <input name="q3" type="radio" value="a) A number"/> a) A number
    </label><br>
    <label>
      <input name="q3" type="radio" value="b) A capital letter"/> b) A capital letter
    </label><br>
    <label>
      <input name="q3" type="radio" value="c) A question mark"/> c) A question mark
    </label><br>
    <label>
      <input name="q3" type="radio" value="d) A full stop"/> d) A full stop
    </label>
  </form>
  <div class="navigation-buttons">
    <button class="navigation-button back-button" onclick="prevSlide(2)">Back</button>
    <button class="navigation-button next-button" onclick="nextSlide(4)">Next</button>
  </div>
  <p class="quote">"Every sentence starts with a strong beginning, just like every story!" - Anonymous</p>
</div>

<!-- Question 4 -->
<div class="quiz-slide" id="slide-4">
  <h2>Q4: How does a sentence end?</h2>
  <form>
    <label>
      <input name="q4" type="radio" value="a) With a full stop, question mark, or exclamation mark"/> a) With a full stop, question mark, or exclamation mark
    </label><br>
    <label>
      <input name="q4" type="radio" value="b) With a comma"/> b) With a comma
    </label><br>
    <label>
      <input name="q4" type="radio" value="c) With a small letter"/> c) With a small letter
    </label><br>
    <label>
      <input name="q4" type="radio" value="d) With a space"/> d) With a space
    </label>
  </form>
  <div class="navigation-buttons">
    <button class="navigation-button back-button" onclick="prevSlide(3)">Back</button>
    <button class="navigation-button next-button" onclick="nextSlide(5)">Next</button>
  </div>
  <p class="quote">"A good ending makes your sentence feel complete." - Anonymous</p>
</div>

<!-- Question 5 -->
<div class="quiz-slide" id="slide-5">
  <h2>Q5: Which of the following is a question?</h2>
  <form>
    <label>
      <input name="q5" type="radio" value="a) I am reading a book."/> a) I am reading a book.
    </label><br>
    <label>
      <input name="q5" type="radio" value="b) Where are you going?"/> b) Where are you going?
    </label><br>
    <label>
      <input name="q5" type="radio" value="c) The sun is shining."/> c) The sun is shining.
    </label><br>
    <label>
      <input name="q5" type="radio" value="d) She is writing a letter."/> d) She is writing a letter.
    </label>
  </form>
  <div class="navigation-buttons">
    <button class="navigation-button back-button" onclick="prevSlide(4)">Back</button>
    <button class="navigation-button next-button" onclick="nextSlide(6)">Next</button>
  </div>
  <p class="quote">"Questions help us explore the world, one sentence at a time." - Anonymous</p>
</div>

<!-- Question 6 -->
<div class="quiz-slide" id="slide-6">
  <h2>Q6: What is the correct sentence?</h2>
  <form>
    <label>
      <input name="q6" type="radio" value="a) Likes to play cricket he."/> a) Likes to play cricket he.
    </label><br>
    <label>
      <input name="q6" type="radio" value="b) He likes to play cricket."/> b) He likes to play cricket.
    </label><br>
    <label>
      <input name="q6" type="radio" value="c) Play cricket he likes."/> c) Play cricket he likes.
    </label><br>
    <label>
      <input name="q6" type="radio" value="d) He to cricket likes play."/> d) He to cricket likes play.
    </label>
  </form>
  <div class="navigation-buttons">
    <button class="navigation-button back-button" onclick="prevSlide(5)">Back</button>
    <button class="navigation-button next-button" onclick="nextSlide(7)">Next</button>
  </div>
  <p class="quote">"Making sense is the secret to a good sentence." - Anonymous</p>
</div>

<!-- Question 7 -->
<div class="quiz-slide" id="slide-7">
  <h2>Q7: Which sentence shows surprise?</h2>
  <form>
    <label>
      <input name="q7" type="radio" value="a) Wow! That’s a big cake!"/> a) Wow! That’s a big cake!
    </label><br>
    <label>
      <input name="q7" type="radio" value="b) I have a red pencil."/> b) I have a red pencil.
    </label><br>
    <label>
      <input name="q7" type="radio" value="c) He is playing outside."/> c) He is playing outside.
    </label><br>
    <label>
      <input name="q7" type="radio" value="d) She likes to read."/> d) She likes to read.
    </label>
  </form>
  <div class="navigation-buttons">
    <button class="navigation-button back-button" onclick="prevSlide(6)">Back</button>
    <button class="navigation-button next-button" onclick="nextSlide(8)">Next</button>
  </div>
  <p class="quote">"Excitement and surprise make sentences lively!" - Anonymous</p>
</div>

<!-- Question 8 -->
<div class="quiz-slide" id="slide-8">
  <h2>Q8: Which of the following is not a sentence?</h2>
  <form>
    <label>
      <input name="q8" type="radio" value="a) I like to eat mangoes."/> a) I like to eat mangoes.
    </label><br>
    <label>
      <input name="q8" type="radio" value="b) Mangoes eat I like."/> b) Mangoes eat I like.
    </label><br>
    <label>
      <input name="q8" type="radio" value="c) The birds are flying."/> c) The birds are flying.
    </label><br>
    <label>
      <input name="q8" type="radio" value="d) She is playing with toys."/> d) She is playing with toys.
    </label>
  </form>
  <div class="navigation-buttons">
    <button class="navigation-button back-button" onclick="prevSlide(7)">Back</button>
    <button class="navigation-button next-button" onclick="nextSlide(9)">Next</button>
  </div>
  <p class="quote">"Every word in a sentence should fit like pieces of a puzzle." - Anonymous</p>
</div>

<!-- Question 9 -->
<div class="quiz-slide" id="slide-9">
  <h2>Q9: What is missing in this sentence: "do you like ice cream"</h2>
  <form>
    <label>
      <input name="q9" type="radio" value="a) A full stop"/> a) A full stop
    </label><br>
    <label>
      <input name="q9" type="radio" value="b) A question mark"/> b) A question mark
    </label><br>
    <label>
      <input name="q9" type="radio" value="c) A comma"/> c) A comma
    </label><br>
    <label>
      <input name="q9" type="radio" value="d) A capital letter"/> d) A capital letter
    </label>
  </form>
  <div class="navigation-buttons">
    <button class="navigation-button back-button" onclick="prevSlide(8)">Back</button>
    <button class="navigation-button next-button" onclick="nextSlide(10)">Next</button>
  </div>
  <p class="quote">"Punctuation makes a sentence complete!" - Anonymous</p>
</div>

<!-- Question 10 -->
<div class="quiz-slide" id="slide-10">
  <h2>Q10: What should every sentence start with?</h2>
  <form>
    <label>
      <input name="q10" type="radio" value="a) A full stop"/> a) A full stop
    </label><br>
    <label>
      <input name="q10" type="radio" value="b) A comma"/> b) A comma
    </label><br>
    <label>
      <input name="q10" type="radio" value="c) A capital letter"/> c) A capital letter
    </label><br>
    <label>
      <input name="q10" type="radio" value="d) A question mark"/> d) A question mark
    </label>
  </form>
  <div class="navigation-buttons">
    <button class="back-button" onclick="prevSlide(9)">Back</button>
    <button class="submit-button" onclick="submitQuiz()">Submit</button>
  </div>
  <p class="quote">"The first letter of your sentence should be strong like the start of a race!" - Anonymous</p>
</div>


        </div>
 
  <!-- Results section -->
  <div class="results-container" id="results-container">
    <h2>Results</h2>
    <p id="student-info"></p>
    <p id="total-marks"></p>
    <p id="time-taken"></p>
    <canvas id="results-chart" width="600" height="400"></canvas>
    <h3>Correct Answers:</h3>
    <ul id="correct-answers-list"></ul> <!-- For correct answers display -->

    <div class="navigation-buttons">
      <button class="back-button back-button-custom" onclick="goBack()">Go Back</button>
    </div>
  </div>
</div>
<script>


let currentSlide = 1;
let timerInterval;
let totalTimeTaken = 0; // Add this to track the total time taken
const totalQuizDuration = 15 * 60; // 15 minutes in seconds


window.onload = function() {
  const studentName = localStorage.getItem('studentName') || 'Student';
  const studentClass = localStorage.getItem('studentClass') || 'Class Info';
  const schoolName = localStorage.getItem('schoolName') || 'School Name';
  const schoolImageURL = localStorage.getItem('schoolURL') || 'default_school_image_url.jpg';
 const userId = localStorage.getItem('userId') || 'User ID'; // Retrieve user ID from localStorage

  document.getElementById('studentName').textContent = studentName;
  document.getElementById('studentClass').textContent = studentClass;
  document.getElementById('schoolName').textContent = schoolName;

  document.getElementById('schoolImage').src = schoolImageURL;

  document.querySelector('.quiz-container').style.display = 'none';
  document.getElementById('results-container').style.display = 'none';
 document.getElementById('userId').textContent = userId; // Display user ID
};

function startQuiz() {
  document.querySelector('.start-container').style.display = 'none';
  document.querySelector('.quiz-container').style.display = 'block';
  startTimer(totalQuizDuration); // Start timer with total quiz duration
}

function nextSlide(slideNumber) {
  document.querySelector('.quiz-slide.active').classList.remove('active');
  document.getElementById('slide-' + slideNumber).classList.add('active');
}

function prevSlide(slideNumber) {
  document.querySelector('.quiz-slide.active').classList.remove('active');
  document.getElementById('slide-' + slideNumber).classList.add('active');
}

let startTime;
let remainingTime = totalQuizDuration;

function startTimer(duration) {
  startTime = performance.now();  // Capture the start time
  requestAnimationFrame(updateTimer);  // Start the animation frame loop
}

function updateTimer(currentTime) {
  const elapsedTime = Math.floor((currentTime - startTime) / 1000);
  const timer = remainingTime - elapsedTime;
  
  const minutes = Math.floor(timer / 60);
  const seconds = timer % 60;
  
  document.getElementById('timer').textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;

  if (timer <= 0) {
    submitQuiz();  // Automatically submit when the time is up
  } else {
    requestAnimationFrame(updateTimer);  // Continue the loop
  }
}
function submitQuiz() {
  clearInterval(timer);

  const correctAnswers = [
  "b) A group of words that makes sense", 
  "b) He goes to school.", 
  "b) A capital letter", 
  "a) With a full stop, question mark, or exclamation mark", 
  "b) Where are you going?", 
  "b) He likes to play cricket.", 
  "a) Wow! That’s a big cake!", 
  "b) Mangoes eat I like.", 
  "b) A question mark", 
  "c) A capital letter"
];

  let totalMarks = 0;
let wrongAnswers = 0;
let notAttempted = 0;

// Calculate the totalMarks first
document.querySelectorAll('.quiz-slide').forEach((slide, index) => {
  const selectedOption = slide.querySelector('input[type="radio"]:checked');
  if (selectedOption) {
    if (selectedOption.value === correctAnswers[index]) {
      totalMarks += 1; // Increment marks for correct answer
    } else {
      wrongAnswers += 1; // Count wrong answers
    }
  } else {
    notAttempted += 1; // Count not attempted questions
  }
});





 const userId = localStorage.getItem('userId'); // Get the userId from localStorage
  const chapterName = "practice1"; // Unique test name
  localStorage.setItem(`${userId}_${chapterName}`, totalMarks); // Store marks specific to the userId


  const minutesTaken = Math.floor(totalTimeTaken / 60);
  const secondsTaken = totalTimeTaken % 60;
  document.getElementById('total-marks').textContent = `Total Marks: ${totalMarks} / 10`;
  document.getElementById('time-taken').textContent = `Time Taken: ${minutesTaken}:${secondsTaken < 10 ? '0' : ''}${secondsTaken}`;

  generateChart(totalMarks, wrongAnswers, notAttempted);
  displayCorrectAnswers(correctAnswers);

  // Send totalMarks to the server
  sendTotalMarksToServer(totalMarks);

  document.querySelector('.quiz-container').style.display = 'none';
  document.getElementById('results-container').style.display = 'block';
}

function generateChart(totalMarks, wrongAnswers, notAttempted) {
  const ctx = document.getElementById('results-chart').getContext('2d');
  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: ['Your Score', 'Wrong Answers', 'Not Attempted'],
      datasets: [{
        label: 'Score',
        data: [totalMarks, wrongAnswers, notAttempted],
        backgroundColor: ['#4CAF50', '#FF5733', '#FFC300']
      }]
    },
    options: {
      scales: {
        y: {
          beginAtZero: true,
          max: 10
        }
      }
    }
  });
}

function displayCorrectAnswers(correctAnswers) {
  const answersList = document.getElementById('correct-answers-list');
  correctAnswers.forEach((answer, index) => {
    const listItem = document.createElement('li');
    listItem.textContent = `Q${index + 1}: ${answer}`;
    answersList.appendChild(listItem);
  });
}

function sendTotalMarksToServer(totalMarks) {
    const username = localStorage.getItem('studentName') || 'Student';
    const userId = localStorage.getItem('userId') || 'User ID'; // Include the user ID

    // Using FormData instead of JSON
    const formData = new FormData();
    formData.append('username', username);
    formData.append('userId', userId); // Add user ID to the payload
    formData.append('totalMarks', totalMarks.toString()); // Ensure totalMarks is sent as a string

    const url = "https://script.google.com/macros/s/AKfycbxKsw4vDb9XSlYdqhidAPQE8GzydDVOf5MgQmFM1Xk9xvebhwjrkjwtuf89VKHWzvZM/exec"; // Replace with actual URL

    fetch(url, {
        method: 'POST',
        body: formData
    })
    .then(response => response.json())
    .then(data => {
        if (data.result !== 'success') {
            console.error("Error sending marks:", data.message);
        }
    })
    .catch(error => {
        console.error("Error:", error);
    });
}


function goBack() {
  if (window.history.length > 1) {
    window.history.back();
  } else {
    document.getElementById('results-container').style.display = 'none';
    document.querySelector('.start-container').style.display = 'block';
  }
}

</script>
</body>
</html>
