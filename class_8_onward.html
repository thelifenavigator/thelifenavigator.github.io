<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Chapter- Practice Test-1 (Science)</title>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>

 body {
    font-family: 'Times New Roman', Times, serif;
    margin: 0;
    padding: 20px;
    font-size: 18px;
    user-select: none;
    background: linear-gradient(135deg, 
                                #3a1c71, 
                                #59328a, 
                                #7849a3, 
                                #9861bc, 
                                #b879d5, 
                                #d76d77, 
                                #e68777, 
                                #f5a177, 
                                #ffaf7b);
    background-size: 400% 400%;
    animation: gradientAnimation 10s ease infinite;
}

@keyframes gradientAnimation {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

.container {
    max-width: 800px;
    margin: auto;
}

.header {
    background-color: #ff9999;
    padding: 20px;
    text-align: center;
    color: black;
    position: relative;
}
.header {
    padding: 20px;
    text-align: center;
    color: white; /* Ensure text is readable against the background */
    position: relative;
    overflow: hidden;
    font-family: 'Arial', sans-serif;
    z-index: 2; /* Ensure the text is above everything else */
}

/* Animated Gradient Background */
.header::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 200%;  /* Extend the background beyond the viewport */
    height: 200%; /* Extend the background beyond the viewport */
    background: linear-gradient(135deg, 
                                #3a1c71, 
                                #59328a, 
                                #7849a3, 
                                #9861bc, 
                                #b879d5, 
                                #d76d77, 
                                #e68777, 
                                #f5a177, 
                                #ffaf7b);
    background-size: 200% 200%;
    animation: gradientWaves 3s ease infinite;
    z-index: -1; /* Place it behind the text */
}

/* Optional: Light overlay for a slight gloss effect without blurring the content */
.header::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(255, 255, 255, 0.1); /* Light overlay to give a glossy effect */
    z-index: 1; /* Place it on top of the gradient, but behind the text */
    pointer-events: none; /* Allow clicks to pass through */
}

/* Wave Animation */
@keyframes gradientWaves {
    0% { background-position: 0% 0%; }
    50% { background-position: 100% 100%; }
    100% { background-position: 0% 0%; }
}

.header img {
    height: 250px;
    width: 350px;
    display: block;
    margin: 0 auto 10px;
}

.header h1 {
    margin: 0;
    font-size: 24px;
}

.header h2 {
    margin: 0;
    font-size: 20px;
}
    }
    .school-name {
        font-weight: bold;
        font-size: 24px;
        margin-top: 10px;
    }
    .quiz-container, .results-container {
        background-color: #fff;
        padding: 20px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        width: 100%;
        margin-top: 20px;
        display: none;
    }
    .quiz-slide {
        display: none;
        transition: transform 0.5s ease-in-out;
    }
    .quiz-slide.active {
        display: block;
    }
    form {
        margin-bottom: 20px;
    }
    h2 {
        color: darkblue;
    }
    label {
        display: block;
        margin-bottom: 10px;
        color: black;
    }
    button, .submit-button {
        background-color: #4CAF50;
        color: white;
        border: none;
        padding: 15px 30px;
        font-size: 18px;
        cursor: pointer;
        border-radius: 5px;
    }
    button:hover, .submit-button:hover {
        background-color: #45a049;
    }
    .start-button, .navigation-button {
        border-radius: 50%;
        padding: 0;
        width: 150px;
        height: 150px;
        background-size: contain;
        background-repeat: no-repeat;
        background-position: center;
        border: none;
        margin: 10px;
    }
    .start-button {
        background-image: url('https://thelifenavigator.com/wp-content/uploads/2024/08/DALL%C2%B7E-2024-08-23-21.52.21-A-circular-sci-fi-themed-logo-for-a-Start-Quiz-button-with-the-text-Click-Here-to-Start-Quiz.-The-button-has-a-glowing-neon-blue-background-with-.webp');
    }
    .back-button {
    background-image: url('https://thelifenavigator.com/wp-content/uploads/2024/08/DALL%C2%B7E-2024-08-23-22.08.48-A-circular-sci-fi-themed-button-with-the-text-Back-centered-in-the-design.-The-button-has-a-glowing-neon-blue-background-with-intricate-tech-inspi.webp');
    background-size: cover;
    background-position: center;
    border-radius: 50%;
    width: 150px;
    height: 150px;
    border: none;
    cursor: pointer;
}
.results-container {
      display: none; /* Ensure results are hidden until quiz is submitted */
    }
    .next-button {
        background-image: url('https://thelifenavigator.com/wp-content/uploads/2024/08/DALL%C2%B7E-2024-08-23-22.03.14-A-circular-sci-fi-themed-button-with-the-text-Next-centered-in-the-design.-The-button-has-a-glowing-neon-blue-background-with-intricate-tech-inspi.webp');
    }
    .submit-button {
        border-radius: 50%;
        padding: 0;
        width: 150px;
        height: 150px;
        background-size: contain;
        background-repeat: no-repeat;
        background-position: center;
        background-image: url('https://thelifenavigator.com/wp-content/uploads/2024/08/DALL%C2%B7E-2024-08-23-22.07.57-A-circular-sci-fi-themed-button-with-the-text-Submit-centered-in-the-design.-The-button-has-a-glowing-neon-blue-background-with-intricate-tech-ins.webp');
        border: none;
        cursor: pointer;
    }
    .navigation-buttons {
        display: flex;
        justify-content: space-between;
    }
    #timer {
        font-size: 20px;
        font-weight: bold;
        margin-bottom: 10px;
        text-align: center;
    }
    .start-container {
        text-align: center;
    }

    .download-button {
        margin-top: 20px;
        padding: 10px 20px;
        background-color: #007bff;
        color: white;
        border: none;
        cursor: pointer;
    }
    .download-button:hover {
        background-color: #0056b3;
    }
    .left-image {
        width: 200px;
        height: auto;
    }
    .guidelines-content img {
        width: 350px;
        height: auto;
    }
    .header img {
        width: 320px;
        height: 250px;
    }
    .score-label {
        font-weight: bold;
        font-size: 18px;
        margin-top: 10px;
    }
    .hidden {
        display: none;
    }
    .login-container {
        max-width: 400px;
        margin: 0 auto;
        padding: 20px;
        background-color: #ffffff;
        border: 1px solid #ccc;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
    .login-container h2 {
        text-align: center;
        color: #333333;
        margin-bottom: 20px;
    }
    .login-container form {
        display: flex;
        flex-direction: column;
    }
    .login-container form label {
        margin-bottom: 5px;
        color: #555555;
    }
    .login-container form input[type="text"],
    .login-container form input[type="password"] {
        padding: 10px;
        margin-bottom: 10px;
        border: 1px solid #ccc;
        border-radius: 4px;
        font-size: 16px;
    }
    .login-container form input[type="submit"] {
        background-color: #4CAF50;
        color: white;
        padding: 12px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 16px;
    }
    .login-container form input[type="submit"]:hover {
        background-color: #45a049;
    }
    .login-container .terms-checkbox {
        margin-bottom: 10px;
        font-size: 14px;
    }
    .login-container .terms-checkbox label {
        color: #555555;
    }
    .login-container .terms-checkbox input[type="checkbox"] {
        margin-right: 5px;
    }
    .login-container .error-message {
        color: #ff6347;
        font-size: 14px;
        text-align: center;
        margin-top: 10px;
    }
    .intro-text {
        font-size: 20px;
        text-align: left;
    }
    .timer-decorated {
        text-align: center;
        font-size: 20px;
        font-weight: bold;
        margin-bottom: 10px;
        padding: 5px;
        background-color: #000;
        color: #0f0;
        border-radius: 5px;
        display: inline-block;
    }
    .quote {
        font-family: 'Times New Roman', Times, serif;
        font-style: italic;
        font-weight: bold;
        text-align: center;
        margin-top: 10px;
    }
    .button-container {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-top: 20px;
    }
    .guidelines-header {
        font-weight: bold;
        margin-top: 20px;
        font-size: 20px;
    }
    .guidelines-content {
        display: flex;
        align-items: flex-start;
        justify-content: space-between;
    }
    #rank-image-container img {
        max-width: 300%;
        height: auto;
        display: block;
        margin: 20px auto;
    }
    .guidelines-button {
        width: 150px;
        height: 150px;
        border-radius: 50%;
        background-image: url('https://thelifenavigator.com/wp-content/uploads/2024/08/paintit.png');
        background-size: contain;
        background-repeat: no-repeat;
        background-position: center;
        border: none;
        cursor: pointer;
        margin: 10px;
    }
    .image-container {
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .left-image {
        width: 200px;
        height: auto;
        margin-right: 10px;
    }

    .right-image {
        width: 200px;
        height: auto;
        margin-left: 10px;


.retest-button {
    background-color: #4CAF50;
    color: white;
    padding: 15px 30px;
    font-size: 18px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    margin: 20px auto;
    display: block;
}

.retest-button:hover {
    background-color: #45a049;
}

    }
    /* CSS to control the size of images in questions */
    .question-image {
        max-width: 80%; /* Limits the width of the image to 80% of the container */
        height: auto; /* Maintains aspect ratio */
        display: block;
        margin: 20px auto; /* Centers the image with some margin */
    }

    /* CSS to control the size of images in questions and options */
    .question-image, .option-image {
        max-width: 30%; /* Limits the width of the image to 30% of the container */
        height: auto; /* Maintains aspect ratio */
        display: block;
        margin: 20px auto; /* Centers the image with some margin */
    }

    /* Specific CSS for option images to allow them to be smaller if needed */
    .option-image {
        max-width: 100%; /* Option images have a smaller max-width */
        margin: 10px auto; /* Smaller margin for option images */
    }
    /* CSS for loading spinner and image */
    .loading-overlay {
        display: none; /* Initially hidden */
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent background */
        z-index: 9999;
        justify-content: center;
        align-items: center;
    }

    .spinner {
        border: 16px solid #f3f3f3;
        border-top: 16px solid #3498db;
        border-radius: 50%;
        width: 200px; /* Size of the spinner */
        height: 200px; /* Size of the spinner */
        animation: spin 2s linear infinite;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
    }

    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }

    /* CSS for the loading image with adjustable size */
    .loading-image {
        width: 300px; /* Adjust this value to control the size of the image */
        height: auto;
        position: absolute;
        top: 60%;
        left: 50%;
        transform: translate(-50%, -50%);
    }

 <!-- Go Back Button -->
    <div class="navigation-buttons">
      <button class="retest-button" onclick="goBack()">Take Re-test or a New Test</button>
    </div>
  </div>
</div>

</style>
</head>
<body>


</script>
</head>
<body>
<div class="header">
  <img id="schoolImage" src="default_school_image_url.jpg" alt="School Image"/>
  <h1 id="schoolName">School Name</h1>
  <h2>Chapter-Human Body: Food we Eat (Science) Practice Test31</h2>
</div>

<div class="container">
  <div class="start-container">
    <h2>Welcome, <span id="studentName">Student</span></h2>
    <h3>Class: <span id="studentClass">Class Info</span></h3>
    <button onclick="startQuiz()">Start Test</button>
  </div>

  <div class="quiz-container">
    <div class="timer-decorated">Time Remaining: <span id="timer">15:00</span></div>

    <!-- Include all the questions as in your original code. -->
  <!-- Question 1 -->
  <div class="quiz-slide active" id="slide-1">
 <h2>Q1: What is a sentence?</h2>
  <form>
    <label>
      <input name="q1" type="radio" value="a) A group of letters"/> a) A group of letters
    </label><br>
    <label>
      <input name="q1" type="radio" value="b) A group of words that makes sense"/> b) A group of words that makes sense
    </label><br>
    <label>
      <input name="q1" type="radio" value="c) A group of numbers"/> c) A group of numbers
    </label><br>
    <label>
      <input name="q1" type="radio" value="d) A group of pictures"/> d) A group of pictures
    </label>
  </form>
  <div class="navigation-buttons">
    <button class="navigation-button next-button" onclick="nextSlide(2)">Next</button>
  </div>
  <p class="quote">"A good sentence helps us understand the world better." - Anonymous</p>
</div>

<!-- Question 2 -->
<div class="quiz-slide" id="slide-2">
  <h2>Q2: Which sentence is correctly written?</h2>
  <form>
    <label>
      <input name="q2" type="radio" value="a) He to school goes."/> a) He to school goes.
    </label><br>
    <label>
      <input name="q2" type="radio" value="b) He goes to school."/> b) He goes to school.
    </label><br>
    <label>
      <input name="q2" type="radio" value="c) Goes he school to."/> c) Goes he school to.
    </label><br>
    <label>
      <input name="q2" type="radio" value="d) Goes school he to."/> d) Goes school he to.
    </label>
  </form>
  <div class="navigation-buttons">
    <button class="navigation-button back-button" onclick="prevSlide(1)">Back</button>
    <button class="navigation-button next-button" onclick="nextSlide(3)">Next</button>
  </div>
  <p class="quote">"Learning to write sentences is like building strong bridges between your thoughts." - Anonymous</p>
</div>

<!-- Question 3 -->
<div class="quiz-slide" id="slide-3">
  <h2>Q3: What does a sentence start with?</h2>
  <form>
    <label>
      <input name="q3" type="radio" value="a) A number"/> a) A number
    </label><br>
    <label>
      <input name="q3" type="radio" value="b) A capital letter"/> b) A capital letter
    </label><br>
    <label>
      <input name="q3" type="radio" value="c) A question mark"/> c) A question mark
    </label><br>
    <label>
      <input name="q3" type="radio" value="d) A full stop"/> d) A full stop
    </label>
  </form>
  <div class="navigation-buttons">
    <button class="navigation-button back-button" onclick="prevSlide(2)">Back</button>
    <button class="navigation-button next-button" onclick="nextSlide(4)">Next</button>
  </div>
  <p class="quote">"Every sentence starts with a strong beginning, just like every story!" - Anonymous</p>
</div>

<!-- Question 4 -->
<div class="quiz-slide" id="slide-4">
  <h2>Q4: How does a sentence end?</h2>
  <form>
    <label>
      <input name="q4" type="radio" value="a) With a full stop, question mark, or exclamation mark"/> a) With a full stop, question mark, or exclamation mark
    </label><br>
    <label>
      <input name="q4" type="radio" value="b) With a comma"/> b) With a comma
    </label><br>
    <label>
      <input name="q4" type="radio" value="c) With a small letter"/> c) With a small letter
    </label><br>
    <label>
      <input name="q4" type="radio" value="d) With a space"/> d) With a space
    </label>
  </form>
  <div class="navigation-buttons">
    <button class="navigation-button back-button" onclick="prevSlide(3)">Back</button>
    <button class="navigation-button next-button" onclick="nextSlide(5)">Next</button>
  </div>
  <p class="quote">"A good ending makes your sentence feel complete." - Anonymous</p>
</div>

<!-- Question 5 -->
<div class="quiz-slide" id="slide-5">
  <h2>Q5: Which of the following is a question?</h2>
  <form>
    <label>
      <input name="q5" type="radio" value="a) I am reading a book."/> a) I am reading a book.
    </label><br>
    <label>
      <input name="q5" type="radio" value="b) Where are you going?"/> b) Where are you going?
    </label><br>
    <label>
      <input name="q5" type="radio" value="c) The sun is shining."/> c) The sun is shining.
    </label><br>
    <label>
      <input name="q5" type="radio" value="d) She is writing a letter."/> d) She is writing a letter.
    </label>
  </form>
  <div class="navigation-buttons">
    <button class="navigation-button back-button" onclick="prevSlide(4)">Back</button>
    <button class="navigation-button next-button" onclick="nextSlide(6)">Next</button>
  </div>
  <p class="quote">"Questions help us explore the world, one sentence at a time." - Anonymous</p>
</div>

<!-- Question 6 -->
<div class="quiz-slide" id="slide-6">
  <h2>Q6: What is the correct sentence?</h2>
  <form>
    <label>
      <input name="q6" type="radio" value="a) Likes to play cricket he."/> a) Likes to play cricket he.
    </label><br>
    <label>
      <input name="q6" type="radio" value="b) He likes to play cricket."/> b) He likes to play cricket.
    </label><br>
    <label>
      <input name="q6" type="radio" value="c) Play cricket he likes."/> c) Play cricket he likes.
    </label><br>
    <label>
      <input name="q6" type="radio" value="d) He to cricket likes play."/> d) He to cricket likes play.
    </label>
  </form>
  <div class="navigation-buttons">
    <button class="navigation-button back-button" onclick="prevSlide(5)">Back</button>
    <button class="navigation-button next-button" onclick="nextSlide(7)">Next</button>
  </div>
  <p class="quote">"Making sense is the secret to a good sentence." - Anonymous</p>
</div>

<!-- Question 7 -->
<div class="quiz-slide" id="slide-7">
  <h2>Q7: Which sentence shows surprise?</h2>
  <form>
    <label>
      <input name="q7" type="radio" value="a) Wow! That’s a big cake!"/> a) Wow! That’s a big cake!
    </label><br>
    <label>
      <input name="q7" type="radio" value="b) I have a red pencil."/> b) I have a red pencil.
    </label><br>
    <label>
      <input name="q7" type="radio" value="c) He is playing outside."/> c) He is playing outside.
    </label><br>
    <label>
      <input name="q7" type="radio" value="d) She likes to read."/> d) She likes to read.
    </label>
  </form>
  <div class="navigation-buttons">
    <button class="navigation-button back-button" onclick="prevSlide(6)">Back</button>
    <button class="navigation-button next-button" onclick="nextSlide(8)">Next</button>
  </div>
  <p class="quote">"Excitement and surprise make sentences lively!" - Anonymous</p>
</div>

<!-- Question 8 -->
<div class="quiz-slide" id="slide-8">
  <h2>Q8: Which of the following is not a sentence?</h2>
  <form>
    <label>
      <input name="q8" type="radio" value="a) I like to eat mangoes."/> a) I like to eat mangoes.
    </label><br>
    <label>
      <input name="q8" type="radio" value="b) Mangoes eat I like."/> b) Mangoes eat I like.
    </label><br>
    <label>
      <input name="q8" type="radio" value="c) The birds are flying."/> c) The birds are flying.
    </label><br>
    <label>
      <input name="q8" type="radio" value="d) She is playing with toys."/> d) She is playing with toys.
    </label>
  </form>
  <div class="navigation-buttons">
    <button class="navigation-button back-button" onclick="prevSlide(7)">Back</button>
    <button class="navigation-button next-button" onclick="nextSlide(9)">Next</button>
  </div>
  <p class="quote">"Every word in a sentence should fit like pieces of a puzzle." - Anonymous</p>
</div>

<!-- Question 9 -->
<div class="quiz-slide" id="slide-9">
  <h2>Q9: What is missing in this sentence: "do you like ice cream"</h2>
  <form>
    <label>
      <input name="q9" type="radio" value="a) A full stop"/> a) A full stop
    </label><br>
    <label>
      <input name="q9" type="radio" value="b) A question mark"/> b) A question mark
    </label><br>
    <label>
      <input name="q9" type="radio" value="c) A comma"/> c) A comma
    </label><br>
    <label>
      <input name="q9" type="radio" value="d) A capital letter"/> d) A capital letter
    </label>
  </form>
  <div class="navigation-buttons">
    <button class="navigation-button back-button" onclick="prevSlide(8)">Back</button>
    <button class="navigation-button next-button" onclick="nextSlide(10)">Next</button>
  </div>
  <p class="quote">"Punctuation makes a sentence complete!" - Anonymous</p>
</div>

<!-- Question 10 -->
<div class="quiz-slide" id="slide-10">
  <h2>Q10: What should every sentence start with?</h2>
  <form>
    <label>
      <input name="q10" type="radio" value="a) A full stop"/> a) A full stop
    </label><br>
    <label>
      <input name="q10" type="radio" value="b) A comma"/> b) A comma
    </label><br>
    <label>
      <input name="q10" type="radio" value="c) A capital letter"/> c) A capital letter
    </label><br>
    <label>
      <input name="q10" type="radio" value="d) A question mark"/> d) A question mark
    </label>
  </form>
  <div class="navigation-buttons">
    <button class="back-button" onclick="prevSlide(9)">Back</button>
    <button class="submit-button" onclick="submitQuiz()">Submit</button>
  </div>
  <p class="quote">"The first letter of your sentence should be strong like the start of a race!" - Anonymous</p>
</div>


        </div>

 <!-- Results section -->
<div class="results-container" id="results-container">
  <h2>Results</h2>
  
  <!-- Student Info (to be filled by JS) -->
  <div id="student-info"></div>
  
  <!-- Rank Image Container -->
  <div id="rank-image-container"></div>
  
  <!-- Total Marks and Time Taken -->
  <p id="total-marks"></p>
  <p id="time-taken"></p>
  
  <!-- Chart for Score Distribution -->
  <canvas id="results-chart" width="600" height="400"></canvas>
  
  <!-- Correct Answers List (to be filled by JS) -->
  <ul id="correct-answers-list"></ul>
  
  <!-- Recommendations and Additional Information -->
  <div id="extra-info"></div>
  

  
 <!-- Back Button -->
  <button class="back-button back-button-custom" onclick="goBack()">Take Re-test or a New Test</button>
</div>
  
 <div id="additional-links" style="display: none;">
  <h2>Empowering Parents: Practical Tips for Nurturing Diverse Learning Styles and Assisting Weak Learners</h2>
  <button onclick="window.open('https://thelifenavigator.com/empowering-parents-practical-tips-for-nurturing-diverse-learning-styles-and-assisting-weak-learners/', '_blank')">Enter to know</button>

  <h2>10 Effective Memory-Boosting Habits for Kids: Practical Parenting Tips</h2>
  <button onclick="window.open('https://thelifenavigator.com/10-effective-memory-boosting-habits-for-kids-practical-parenting-tips/', '_blank')">Enter to know</button>
</div>


<!-- Loading Overlay -->
<div id="loadingOverlay" class="loading-overlay">
  <div class="spinner"></div>
  <img class="loading-image" src="https://thelifenavigator.com/wp-content/uploads/2024/08/pageisloading-1-1024x1024.png" alt="Loading..."/>
</div>

<script>
let currentSlide = 1;
let startTime;
let totalQuizDuration = 15 * 60; // 15 minutes in seconds (900 seconds)
let timerInterval;

function startQuiz() {
  document.querySelector('.start-container').style.display = 'none';
  document.querySelector('.quiz-container').style.display = 'block';

  // Set the start time to the current time in seconds
  startTime = Math.floor(Date.now() / 1000);
  // Start the timer
  timerInterval = setInterval(updateTimer, 1000); // Update timer every second
}

function updateTimer() {
  const currentTime = Math.floor(Date.now() / 1000);  // Get the current time in seconds
  const elapsedTime = currentTime - startTime;  // Calculate how much time has passed since the quiz started

  // Calculate remaining time
  const remainingTime = totalQuizDuration - elapsedTime;

  // Prevent negative countdown and submit quiz if time is up
  if (remainingTime <= 0) {
    clearInterval(timerInterval); // Stop the timer
    document.getElementById('timer').textContent = "0:00"; // Display 0:00 when time runs out
    submitQuiz(); // Automatically submit the quiz when time is up
    return;
  }

  // Convert remainingTime to minutes and seconds
  const minutes = Math.floor(remainingTime / 60);
  const seconds = remainingTime % 60;

  // Update the timer display
  document.getElementById('timer').textContent = `Time Remaining: ${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
}

function submitQuiz() {
  // Clear the interval to stop the timer
  clearInterval(timerInterval);
  // Your existing quiz submission logic
  alert("Time is up! Submitting your quiz...");
}


window.onload = function() {
  const studentName = localStorage.getItem('studentName') || 'Student';
  const studentClass = localStorage.getItem('studentClass') || 'Class Info';
  const schoolName = localStorage.getItem('schoolName') || 'School Name';
  const schoolImageURL = localStorage.getItem('schoolURL') || 'default_school_image_url.jpg';
  const userId = localStorage.getItem('userId') || 'User ID'; // Retrieve user ID from localStorage

  document.getElementById('studentName').textContent = studentName;
  document.getElementById('studentClass').textContent = studentClass;
  document.getElementById('schoolName').textContent = schoolName;

  document.getElementById('schoolImage').src = schoolImageURL;
document.querySelector('.quiz-container').style.display = 'none';
// document.getElementById('results-container').style.display = 'block';

  document.getElementById('userId').textContent = userId; // Display user ID
};

function startQuiz() {
  document.querySelector('.start-container').style.display = 'none';
  document.querySelector('.quiz-container').style.display = 'block';
  
  // Start the timer based on real time
  startTime = Date.now();
  startTimer(totalQuizDuration);
}

function startTimer(duration) {
  let timer = duration, minutes, seconds;
  
  timerInterval = setInterval(function() {
    // Calculate the time elapsed
    let elapsed = Math.floor((Date.now() - startTime) / 1000);
    
    // Subtract elapsed time from the total duration
    let remainingTime = duration - elapsed;
    
    minutes = Math.floor(remainingTime / 60);
    seconds = remainingTime % 60;
    
    document.getElementById('timer').textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
    
    // If time runs out, stop the timer and submit the quiz
    if (remainingTime <= 0) {
      clearInterval(timerInterval);
      submitQuiz();
    }
  }, 1000); // Update every second
}

function nextSlide(slideNumber) {
  document.querySelector('.quiz-slide.active').classList.remove('active');
  document.getElementById('slide-' + slideNumber).classList.add('active');
}

function prevSlide(slideNumber) {
  document.querySelector('.quiz-slide.active').classList.remove('active');
  document.getElementById('slide-' + slideNumber).classList.add('active');
}

function startTimer(duration) {
  let timer = duration, minutes, seconds;
  timerInterval = setInterval(function() {
    minutes = Math.floor(timer / 60);
    seconds = timer % 60;
    document.getElementById('timer').textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
    totalTimeTaken = totalQuizDuration - timer; // Track total time taken

    if (--timer < 0) {
      clearInterval(timerInterval);
      submitQuiz(); // Automatically submit the quiz when time runs out
    }
  }, 1000);
}

function submitQuiz() {
  clearInterval(timerInterval);

  const correctAnswers = [
  "b) A group of words that makes sense", 
  "b) He goes to school.", 
  "b) A capital letter", 
  "a) With a full stop, question mark, or exclamation mark", 
  "b) Where are you going?", 
  "b) He likes to play cricket.", 
  "a) Wow! That’s a big cake!", 
  "b) Mangoes eat I like.", 
  "b) A question mark", 
  "c) A capital letter"
];

  let totalMarks = 0;
let wrongAnswers = 0;
let notAttempted = 0;

// Calculate the totalMarks first
document.querySelectorAll('.quiz-slide').forEach((slide, index) => {
  const selectedOption = slide.querySelector('input[type="radio"]:checked');
  if (selectedOption) {
    if (selectedOption.value === correctAnswers[index]) {
      totalMarks += 1; // Increment marks for correct answer
    } else {
      wrongAnswers += 1; // Count wrong answers
    }
  } else {
    notAttempted += 1; // Count not attempted questions
  }
});



 const userId = localStorage.getItem('userId'); // Get the userId from localStorage
  const chapterName = "practice3"; // Unique test name
  localStorage.setItem(`${userId}_${chapterName}`, totalMarks); // Store marks specific to the userId


  const minutesTaken = Math.floor(totalTimeTaken / 60);
  const secondsTaken = totalTimeTaken % 60;
  document.getElementById('total-marks').textContent = `Total Marks: ${totalMarks} / 10`;
  document.getElementById('time-taken').textContent = `Time Taken: ${minutesTaken}:${secondsTaken < 10 ? '0' : ''}${secondsTaken}`;


  generateChart(totalMarks, wrongAnswers, notAttempted);
  displayCorrectAnswers(correctAnswers);

  // Call function to display recommendations and rank
  displayRecommendationsAndRank(totalMarks);

  // Send totalMarks to the server
  sendTotalMarksToServer(totalMarks);

sendTotalMarksToServer(totalMarks);
localStorage.setItem('practice2', totalMarks);

      document.querySelector('.quiz-container').style.display = 'none';
  document.getElementById('results-container').style.display = 'block';
}

function displayRecommendationsAndRank(totalMarks) {
  const recommendationsElement = document.getElementById('extra-info');
  let recommendationText = '';
  let motivationMessage = '';

  if (totalMarks < 7) {
    recommendationText += `<p>Your score is less than 70%. It is recommended to review the study material and attempt the test again for better understanding and improvement.</p>`;
  }

  if (totalMarks >= 8) {
    motivationMessage = `<p>Fantastic job! You are excelling in your studies. Keep up the excellent work!</p>`;
  } else if (totalMarks >= 6) {
    motivationMessage = `<p>Good effort! You have a solid understanding. A little more practice and you’ll excel!</p>`;
  } else {
    motivationMessage = `<p>Don't be discouraged! Every step you take is a step toward improvement. Keep studying and you'll get there!</p>`;
  }

  if (motivationMessage) {
    recommendationsElement.innerHTML += `<div>${motivationMessage}</div>`;
  }
  if (recommendationText) {
    recommendationsElement.innerHTML += `<div>${recommendationText}</div>`;
  }

  // Calculate and show rank and stars
  const percentage = (totalMarks / 10) * 100;
  const { rank, starText, numStars } = calculateRankAndStars(percentage);

  const rankImageMap = {
    "Needs Improvement": " https://thelifenavigator.com/wp-content/uploads/2024/08/neeed_improvement_class7-1024x585.webp",
    "New Explorer": "https://thelifenavigator.com/wp-content/uploads/2024/08/newexplorerclass7-1024x585.webp",
    "Rising Star": "https://thelifenavigator.com/wp-content/uploads/2024/08/risingstarclass7-1024x585.webp",
    "Brilliant Navigator": "https://thelifenavigator.com/wp-content/uploads/2024/08/Black-and-Golden-Elegant-Certificate-of-Achievement-1-1024x724.png",
    "Astro Captain": "https://thelifenavigator.com/wp-content/uploads/2024/08/astrocaptainclass7-585x1024.webp",
    "Galaxy Guru": "https://thelifenavigator.com/wp-content/uploads/2024/10/Untitled-design-5-1024x1024.png",
    "Universe Legend": "https://thelifenavigator.com/wp-content/uploads/2024/08/universelegendclass7onward-585x1024.webp"
  };

  const rankImageContainer = document.getElementById('rank-image-container');
  const rankImageURL = rankImageMap[rank];
  if (rankImageURL) {
    rankImageContainer.innerHTML = `<img src="${rankImageURL}" alt="${rank}" style="display:block;margin:auto;width:90%;max-width:700px;height:auto;">`;
  }

  const studentName = localStorage.getItem('studentName') || 'Student';
  const attendance = '95%'; // Example static value for attendance

  document.getElementById('student-info').innerHTML = `
      <p><strong>Student Name:</strong> ${studentName}</p>
      <p><strong style="color: #00008B;">Current Rank: ${rank} (${numStars} star(s)) ${starText}</strong></p>
      <p style="font-weight: bold; color: #00008B;">Total Marks Obtained: ${totalMarks} / 10</p>
  `;
}

function calculateRankAndStars(percentage) {
  let rank, starText, numStars;
  if (percentage >= 96) {
    rank = "Universe Legend";
    starText = "★★★★★";
    numStars = 5;
  } else if (percentage >= 90) {
    rank = "Galaxy Guru";
    starText = "★★★★";
    numStars = 4;
  } else if (percentage >= 80) {
    rank = "Astro Captain";
    starText = "★★★";
    numStars = 3;
  } else if (percentage >= 70) {
    rank = "Brilliant Navigator";
    starText = "★★";
    numStars = 2;
  } else if (percentage >= 60) {
    rank = "Rising Star";
    starText = "★";
    numStars = 1;
  } else if (percentage >= 50) {
    rank = "New Explorer";
    starText = "Reach Next Level to get stars";
    numStars = 0;
  } else {
    rank = "Needs Improvement";
    starText = "Nil";
    numStars = 0;
  }
  return { rank, starText, numStars };
}

function generateChart(totalMarks, wrongAnswers, notAttempted) {
  const ctx = document.getElementById('results-chart').getContext('2d');
  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: ['Your Score', 'Wrong Answers', 'Not Attempted'],
      datasets: [{
        label: 'Score',
        data: [totalMarks, wrongAnswers, notAttempted],
        backgroundColor: ['#4CAF50', '#FF5733', '#FFC300']
      }]
    },
    options: {
      scales: {
        y: {
          beginAtZero: true,
          max: 10
        }
      }
    }
  });
}

function displayCorrectAnswers(correctAnswers) {
  const answersList = document.getElementById('correct-answers-list');
  correctAnswers.forEach((answer, index) => {
    const listItem = document.createElement('li');
    listItem.textContent = `Q${index + 1}: ${answer}`;
    answersList.appendChild(listItem);
  });
}

function sendTotalMarksToServer(totalMarks) {
  const username = localStorage.getItem('studentName') || 'Student';
  const userId = localStorage.getItem('userId') || 'User ID'; // Include the user ID

  const formData = new FormData();
  formData.append('username', username);
  formData.append('userId', userId);
  formData.append('totalMarks', totalMarks.toString());

  const url = "https://script.google.com/macros/s/AKfycbxiUDpi0T1nLpsMe70LSJMX0F-tkpyHSOmoVP0q1s5Ljt7wu45AOpDCFE437pOgG2TU/exec";

  fetch(url, {
    method: 'POST',
    body: formData
  })
  .then(response => response.json())
  .then(data => {
    if (data.result !== 'success') {
      console.error("Error sending marks:", data.message);
    }
  })
  .catch(error => {
    console.error("Error:", error);
  });
}


function goBack() {
  if (window.history.length > 1) {
    window.history.back();
  } else {
    document.getElementById('results-container').style.display = 'none';
    document.querySelector('.start-container').style.display = 'block';
  }
}

function resetQuiz() {
  // Reset quiz state, if needed
  currentSlide = 1;
  document.querySelectorAll('input[type="radio"]').forEach(input => input.checked = false);
  document.querySelector('.quiz-slide.active').classList.remove('active');
  document.getElementById('slide-1').classList.add('active');
  document.getElementById('timer').textContent = '15:00'; // Reset timer display
}

</script>
